# Example configuration for General Purpose Chatbot with MCP support

# Service configuration
service_name: "general-purpose-chatbot"
version: "1.0.0"
environment: "development"

# Server configuration
port: 8080
request_timeout: "30s"
idle_timeout: "60s"

# Anthropic/Claude configuration
anthropic:
  api_key: "${ANTHROPIC_API_KEY}"  # Set via environment variable
  model: "claude-3-5-sonnet-20241022"
  api_base_url: "https://api.anthropic.com"
  max_retries: 3
  initial_backoff: "1s"
  max_backoff: "10s"
  timeout: "30s"

# Logging configuration
logging:
  level: "info"
  format: "json"

# Monitoring configuration
monitoring:
  health_check_timeout: "10s"
  metrics_enabled: true
  metrics_port: 9090

# Database configuration (optional)
database:
  url: ""  # Set if using database features
  max_connections: 25
  conn_max_lifetime: "5m"
  conn_max_idle_time: "5m"

# Redis configuration (optional)
redis:
  url: ""  # Set if using Redis features
  password: ""
  database: 0
  timeout: "5s"

# Security configuration
security:
  cors_allowed_origins: ["http://localhost:3000", "http://localhost:8080"]
  max_request_size: 10485760  # 10MB
  rate_limit_enabled: true
  rate_limit_rps: 100

# MCP (Model Context Protocol) configuration
mcp:
  enabled: true
  timeout: "30s"
  
  # Discovery configuration
  discovery:
    enabled: true
    refresh_interval: "5m"
    health_checks: true
  
  # MCP Servers configuration
  servers:
    # Filesystem MCP Server (for local file operations)
    filesystem:
      name: "filesystem"
      enabled: true
      transport: "stdio"
      command: "npx"
      args: 
        - "-y"
        - "@modelcontextprotocol/server-filesystem"
        - "/tmp/mcp_files"  # Change to your desired directory
      tool_filter: ["list_directory", "read_file", "write_file"]  # Optional: limit available tools
    
    # Google Maps MCP Server (requires API key)
    google_maps:
      name: "google_maps"
      enabled: false  # Enable and configure with your API key
      transport: "stdio"
      command: "npx"
      args:
        - "-y"
        - "@modelcontextprotocol/server-google-maps"
      environment:
        GOOGLE_MAPS_API_KEY: "${GOOGLE_MAPS_API_KEY}"  # Set via environment variable
      tool_filter: ["get_directions", "find_place"]
    
    # Example WebSocket MCP Server
    websocket_example:
      name: "websocket_server"
      enabled: false
      transport: "websocket"
      url: "ws://localhost:8080/mcp"
      headers:
        User-Agent: "general-purpose-chatbot/1.0.0"
      auth:
        type: "bearer"
        token: "${MCP_WEBSOCKET_TOKEN}"
    
    # Example Server-Sent Events MCP Server
    sse_example:
      name: "sse_server"
      enabled: false
      transport: "sse"
      url: "http://localhost:3000/mcp"
      headers:
        Accept: "text/event-stream"
        Cache-Control: "no-cache"
      auth:
        type: "api_key"
        header: "X-API-Key"
        api_key: "${MCP_SSE_API_KEY}"
    
    # Database MCP Server (example with MCP Toolbox)
    database:
      name: "database"
      enabled: false  # Enable if you have database MCP server
      transport: "stdio"
      command: "mcp-toolbox-databases"
      args:
        - "--config"
        - "/path/to/database-config.json"
      environment:
        DATABASE_URL: "${DATABASE_URL}"
      tool_filter: ["query", "schema", "tables"]

# Example environment variables to set:
#
# export ANTHROPIC_API_KEY="sk-ant-your-api-key-here"
# export GOOGLE_MAPS_API_KEY="your-google-maps-api-key" 
# export MCP_WEBSOCKET_TOKEN="your-websocket-token"
# export MCP_SSE_API_KEY="your-sse-api-key"
# export DATABASE_URL="postgresql://user:pass@localhost/db"